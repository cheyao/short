<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Cyao url shortener</title>
		<link href="css/style.css" rel="stylesheet">
	</head>
	<body>
		<h1>Cyao URL shortener</h1>
		<p>DM @Cyao on slack with your yubikey OTP user to get access</p>
		<p>Used to send responses to my friends :D</p>
		<input type="string" name="OTP" id="OTP" placeholder="OTP Password">
		<br>
		<input name="files" type="file">
		<br>
		<input id="name" type="string" placeholder="name">
		<br>
		<button type="send" onclick="put()">Upload</button>

		<p id="output"></p>
		<script>
			function send() {
				const API = 'https://localhost:8000/upload';
				const form = {
					'password': document.getElementById('OTP').value),
					'name':     document.getElementById('name').value),
				};

				return fetch(API, {
					method: 'POST',
					body: form
				}).then(response => response.json())
			}

			function put() {
				send()
					.then((json) => { document.getElementById('output').textContent = json['response']; })
					.catch(error => { document.getElementById('output').textContent = error; });
			}
		</script>
	</body>
	<style>
		h1 {
			text-align: center;
		}
	</style>
</html>
